module.exports = function(app) {  var fs = require('fs')  , formidable = require('formidable')  , Vehicle = app.models.vehicle  ;  var VehicleController = {    index: function(req, res) {      Vehicle.find({}, function(err, vehicles) {        res.json(vehicles);      });    },    create: function(req, res) {      var form = new formidable.IncomingForm();      form.parse(req, function(err, fields, files) {        var path = files.file.path, filenamePath = '/tmp/' + files.file.name;        fs.rename(path, '/tmp/', function (err) {          fs.createWriteStream(filenamePath);          var vehicle = {            picture: {              data: fs.readFileSync(filenamePath),              contentType: files.file.type            },            name: fields.name,            driver: fields.driver,            capacity: fields.capacity          };          Vehicle.create(vehicle, function(err, doc) {            if (err) return res.json(err);            res.json(doc);          });        });      });    }  };  return VehicleController;};